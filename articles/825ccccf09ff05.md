---
title: "EC2ï¼ˆUbuntuï¼‰ã§Gazeboï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ï¼‰ã‚’å‹•ã‹ã™"
emoji: "ğŸ¤–"
type: "tech"
topics:
  - "aws"
  - "ubuntu"
  - "ec2"
  - "drone"
  - "gazebo"
published: true
published_at: "2023-12-31 13:01"
---

# èƒŒæ™¯
* Gazeboï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ï¼‰ãŒå‹•ããƒã‚·ãƒ³ãŒå¿…è¦ã«ãªã£ãŸ
* ä¸€æ™‚çš„ã«æ•°ã‚’å¢—ã‚„ã—ãŸã‚ŠæŸ”è»Ÿã«ä½¿ã„ãŸã„ã®ã§EC2ä¸Šã«æº–å‚™ã—ã‚ˆã†
* Gazeboï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ï¼‰ã¯GUIè¡¨ç¤ºã—ãŸã„

# ç›®æ¨™
* EC2ï¼ˆUbuntuï¼‰ã§Gazeboï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ï¼‰ã‚’å‹•ã‹ã™ â€»ä¸‹è¨˜ã§GUIè¡¨ç¤ºç’°å¢ƒã¯æ§‹ç¯‰æ¸ˆ
@[card](https://zenn.dev/yamagile/articles/80843d9ae24abe)

# ãƒã‚¤ãƒ³ãƒˆï¼
* ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã¯g4dn.2xlrgeã‚’é¸æŠï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ç’°å¢ƒã«é©åˆ‡ãªã‚‚ã®ã‚’é¸æŠï¼‰
  * ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã‚’å¤‰æ›´ã§ãã‚‹ã®ã¯ã€ç¾åœ¨ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã¨å¿…è¦ãªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã«äº’æ›æ€§ãŒã‚ã‚‹å ´åˆã®ã¿ï¼ˆä¾‹ï¼šg4dn.4xlargeã‹ã‚‰g4dn.2xlargeã¯å¤‰æ›´å¯ã€g4dn.2xlargeã¯g4dn.2xlargeä»¥å¤–ã«å¤‰æ›´ä¸å¯ï¼‰ã¨ãªã‚‹ã®ã§ã€è‰²ã€…è¨­å®šã™ã‚‹å‰ã«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãŒæƒ³å®šé€šã‚Šå‹•ãã‹ç¢ºèªã™ã‚‹

# ç’°å¢ƒ
* ã‚¯ãƒ©ã‚¦ãƒ‰ï¼šAWS
* ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶šPCï¼šUbuntu 20.04LTS

# æ‰‹é †
## EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã‚’å¤‰æ›´ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
* ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’åœæ­¢ã™ã‚‹
* ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã‚’g4dn.2xlrgeã«å¤‰æ›´ã™ã‚‹ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ç’°å¢ƒã«é©åˆ‡ãªã‚‚ã®ã‚’é¸æŠï¼‰
  * ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã‚’å¤‰æ›´ã§ãã‚‹ã®ã¯ã€ç¾åœ¨ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã¨å¿…è¦ãªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã«äº’æ›æ€§ãŒã‚ã‚‹å ´åˆã®ã¿ï¼ˆä¾‹ï¼šg4dn.4xlargeã‹ã‚‰g4dn.2xlargeã¯å¤‰æ›´å¯ã€g4dn.2xlargeã¯g4dn.2xlargeä»¥å¤–ã«å¤‰æ›´ä¸å¯ï¼‰ã¨ãªã‚‹ã®ã§ã€è‰²ã€…è¨­å®šã™ã‚‹å‰ã«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãŒæƒ³å®šé€šã‚Šå‹•ãã‹ç¢ºèªã™ã‚‹

## ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’å¤‰æ›´ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
* ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’64GiBã«å¤‰æ›´ã™ã‚‹ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ç’°å¢ƒã«é©åˆ‡ãªã‚‚ã®ã‚’é¸æŠï¼‰
  * ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚¿ã‚¤ãƒ—ï¼šæ±ç”¨SSD (gp3)
  * ã‚µã‚¤ã‚º (GiB)ï¼š64
  * IOPSï¼š3000
  * ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ (MiB/ç§’)ï¼š125

## EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’èµ·å‹•
* GUIè¡¨ç¤ºç’°å¢ƒæœªæ§‹ç¯‰ã§ã‚ã‚Œã°æ§‹ç¯‰ã™ã‚‹ï¼ˆ[EC2ï¼ˆUbuntuï¼‰ã®GUIã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹](https://zenn.dev/yamagile/articles/80843d9ae24abe)ï¼‰

## EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å¿…è¦ã‚½ãƒ•ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€è¨­å®š
* ç«¯æœ«ã‹ã‚‰SSHæ¥ç¶šã™ã‚‹ï¼ˆèµ·å‹•ã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«æ¥ç¶šç”»é¢ã§SSHã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¿ãƒ–ã‚’å‚ç…§ï¼‰
```
ssh -i "{ã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«}" ubuntu@{ãƒ‘ãƒ–ãƒªãƒƒã‚¯ IPv4 DNS}
```
* ã¾ãšã¯æ›´æ–°
```
sudo apt update
sudo apt -y upgrade
```
* ubuntu-drivers-commonã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
sudo apt install ubuntu-drivers-common
```
* NVIDIAæ¨å¥¨ï¼ˆrecommendedï¼‰ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ç¢ºèª
  * Ubuntu 20.04LTSã®æ™‚ã®ç½ ï¼ˆ-openã¨ä»˜ã„ã¦ã„ã‚‹ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã§ã¯ç„¡ã„ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼‰ã¯ç„¡ã•ãã†
```
sudo ubuntu-drivers devices
```
```
pci0000:00/0000:00:1e.0 ==
modalias : pci:v000010DEd00001EB8sv000010DEsd000012A2bc03sc02i00
vendor   : NVIDIA Corporation
model    : TU104GL [Tesla T4]
driver   : nvidia-driver-418-server - distro non-free
driver   : nvidia-driver-535-server - distro non-free
driver   : nvidia-driver-525-server - distro non-free
driver   : nvidia-driver-470 - distro non-free
driver   : nvidia-driver-535 - distro non-free recommended
driver   : nvidia-driver-450-server - distro non-free
driver   : nvidia-driver-525 - distro non-free
driver   : nvidia-driver-470-server - distro non-free
driver   : xserver-xorg-video-nouveau - distro free builtin
```
* NVIDIAæ¨å¥¨ï¼ˆrecommendedï¼‰ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
sudo apt install nvidia-driver-535
```
* å†èµ·å‹•
```
sudo reboot
```
* NVIDIAãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«çµæœï¼ˆGPUä½¿ç”¨çŠ¶æ³ï¼‰ã‚’ç¢ºèªã™ã‚‹
```
nvidia-smi
```

## EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  * ä¾‹ï¼š[Parrot Sphinx: Installation procedure](https://developer.parrot.com/docs/sphinx/installation.html)

## ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶šPCï¼ˆUbuntuï¼‰ã‹ã‚‰ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶š
* remminaã‚’èµ·å‹•
* EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPv4ã‚¢ãƒ‰ãƒ¬ã‚¹ã«RDPã§æ¥ç¶šã™ã‚‹
* ä»¥ä¸‹ã‚’å…¥åŠ›ã—ã¦OKã‚’æŠ¼ã™
  * Session: Xorg
  * username: {rdp-user}
  * password: {rdp-userã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰}

## ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶šPCï¼ˆUbuntuï¼‰ã‹ã‚‰ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿èµ·å‹•
* ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶šã—ãŸã‚½ãƒ•ãƒˆä¸Šã§ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’èµ·å‹•
  * ä¾‹ï¼š[Parrot Sphinx: Quick start](https://developer.parrot.com/docs/sphinx/quickstart.html)
    * Emptyï¼ˆreal time percent: 99%ï¼‰
    ![sphinx-empty](https://storage.googleapis.com/zenn-user-upload/b7558d9d41a5-20231231.png)
    * Forestï¼ˆreal time percent: 58%ï¼‰
    ![sphinx-forest](https://storage.googleapis.com/zenn-user-upload/e729696f74aa-20231231.png)
    * Dark Forestï¼ˆreal time percent: 91%ï¼‰
    ![sphinx-dark-forest](https://storage.googleapis.com/zenn-user-upload/07bc7c5e09a1-20231231.png)
    * Factoryï¼ˆreal time percent: 47%ï¼‰
    ![sphinx-factory](https://storage.googleapis.com/zenn-user-upload/bbcf64edf375-20231231.png)

# å‚è€ƒæ–‡çŒ®
@[card](https://tech.aptpod.co.jp/entry/2023/12/18/100000)
@[card](https://qiita.com/y-vectorfield/items/72bfb66d8ec85847fe2f)
@[card](https://zenn.dev/yamagile/articles/80843d9ae24abe)
